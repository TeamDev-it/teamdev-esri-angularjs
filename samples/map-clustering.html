<html>
<head>
  <title>Base Map Sample</title>
  <link rel="stylesheet" href="http://js.arcgis.com/3.14/esri/css/esri.css">
  <link href="../css/teamdev.esri.css" rel="stylesheet" />
  <script src="http://js.arcgis.com/3.14/"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
  <script src="../js/teamdev.esri.js"></script>
  <style>
    body {
      padding: 0;
      margin: 0;
      overflow: hidden;
      position: relative;
    }

    .map {
      position: absolute;
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<!-- REMEMBER : Its an AngularJS Extension, so you need to declare an ng-app or you need to use our default app "MapApp"-->
<body ng-app="MapApp" ng-controller="myController">
  <esri-map map-id="map" base-map="osm" zoom="6" map-center="[12.4036841,42.9141749]">

    <!-- cluster Layer is a custom layer, so you have to write the right path of the custom layer -->
    <cluster-layer dojo-file="../js/libs/clusterlayer.js"
                   url="http://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/World_Cities/FeatureServer/0"
                   use-default-symbol="true"
                   distance="95"
                   label-color="#FFF"
                   show-singles="true"
                   on-add-point-to-cluster="pointtocluster"
                   object-id-field="FID"
                   layer-id="cl">
    </cluster-layer>
  </esri-map>
  <script>
    angular.module("MapApp")
    .controller("myController", function ($scope) {
      $scope.pointtocluster = function (e) {
        console.log(e);
      };
    })
  </script>
</body>
</html>